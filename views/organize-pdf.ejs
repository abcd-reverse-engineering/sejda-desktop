<%- include('partials/task-screen-before'); %>

<style>
  #file-page-selector-wrap .pdf-page-wrap:hover {
    background-color: #ffd490;
  }

  #file-page-selector-wrap .pdf-page-wrap.selected:hover {
    background-color: #f4a300;
  }

  #file-page-selector-wrap .pdf-page-wrap {
    margin: 0 !important;
    padding: 0 !important;
  }

  #file-page-selector-wrap .pdf-page {
    width: 150px !important;
  }

  .add-mark {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    height: 260px;
    width: 30px;
    position: absolute;
    z-index: 2;
    margin-left: 5px;
    pointer-events: none;
  }

  .add-mark.before {
    margin-left: -35px;
  }

  .add-mark .fal {
    background-color: rgba(255, 255, 255, 0.9);
    color: #555;
    border-radius: 20px;
    padding: 5px;
    position: absolute;
    cursor: pointer;
    opacity: 0.4;
    pointer-events: all;
  }

  .add-mark.hover .fal,
  .add-mark .fal:hover,
  .add-mark.selected .fal {
    background-color: #0282e5;
    color: #FFF;
    opacity: 1;
  }

  .local-files-chooser .fileinput-button input,
  .local-files-chooser .fileinput-link input {
    height: 30px;
  }

  .dropdown-submenu {
    position: relative;
  }

  .dropdown-submenu>.dropdown-menu {
    top: 0;
    left: 100%;
    margin-top: -6px;
    margin-left: -1px;
    -webkit-border-radius: 0 6px 6px 6px;
    -moz-border-radius: 0 6px 6px;
    border-radius: 0 6px 6px 6px;
  }

  .dropdown-submenu>a:after {
    display: block;
    content: " ";
    float: right;
    width: 0;
    height: 0;
    border-color: transparent;
    border-style: solid;
    border-width: 5px 0 5px 5px;
    border-left-color: #777;
    margin-top: 7px;
    margin-right: -2px;
  }

  .dropdown-submenu.pulled-left>.dropdown-menu {
    left: -100%;
    margin-left: 10px;
    border-radius: 6px 0 6px 6px;
  }
</style>

<section id="task-content" data-task="combineReorder" data-can-reorder="true" data-can-delete="true" data-can-rotate="true" data-can-duplicate="true" data-can-move="true" data-multiple-files="true" data-drop-files-once="false">
  <div class="container centered">
    <div class="row">
      <h1><lift:locS>Organize PDF Pages</lift:locS></h1>
      <h2><lift:locS>Arrange and reorder PDF pages</lift:locS></h2>
    </div>
  </div>

  <%- include('partials/file-upload', { pages: 50 }); %>
  <%- include('partials/loading'); %>
  <%- include('partials/pdf-page-thumbnails'); %>
  <%- include('partials/pages-picker-modal'); %>


  <div class="centered bottom-fixed step2" style="display:none">
    <form class="form-inline task-form" autocomplete="off">
      <input type="hidden" name="type" value="combineReorder"/>

      <div class="container">
        <div class="row head-space">
          <button type="submit" class="btn btn-default btn-medium"><lift:locS>Save</lift:locS></button>
        </div>
      </div>
    </form>
  </div>

  <div id="globalBtns" style="display: none">
    <div aria-label="Tools" role="group" class="btn-group wrap">
      <div id="addMoreFilesBtn" class="btn-group upload-btn-group secondary-upload-btn-group can-add-more lift:FileUploadSnippet">
        <button class="btn dropdown-toggle" data-toggle="dropdown">
          <i class="fal fa-file-pdf"></i> <lift:locS>Add Files</lift:locS>
          <span class="caret"></span>
        </button>
        <ul id="add-files-moving-menu" class="dropdown-menu dropdown-xs">
          <li><a href="javascript://" class="local-files-chooser">
                <span class="fileinput-button">
                  <i class="fal fa-folder icon"></i> <lift:locS>Local Files</lift:locS>
                  <form action="" method="post" enctype="multipart/form-data">
                    <input class="fileupload" type="file" name="file" data-url="" data-scope="task-file" multiple="multiple" title="Upload" accept=".pdf">
                  </form>
                </span>
            </a></li>
        </ul>
      </div>
      <div id="addMorePagesBtn" class="btn-group upload-btn-group secondary-upload-btn-group can-add-more can-pick-pages lift:FileUploadSnippet">
        <button class="btn dropdown-toggle" data-toggle="dropdown">
          <i class="fal fa-copy"></i> <lift:locS>Add Pages</lift:locS>
          <span class="caret"></span>
        </button>
        <ul id="add-pages-moving-menu" class="dropdown-menu dropdown-xs">
          <li><a href="javascript://" class="local-files-chooser">
                <span class="fileinput-button">
                  <i class="fal fa-folder icon"></i> <lift:locS>Local Files</lift:locS>
                  <form action="" method="post" enctype="multipart/form-data">
                    <input class="fileupload can-pick-pages" type="file" name="file" data-url="" data-scope="task-file" title="Upload" accept=".pdf">
                  </form>
                </span>
            </a></li>
          <li class="divider" role="separator"></li>
          <li><a class="add-blank-page-btn" href="javascript://"><i class="fal fa-file" style="margin-right: 8px;margin-left: 5px;"></i> <lift:locS>Blank Page</lift:locS></a></li>
        </ul>
      </div>
      <div class="btn-group">
        <button id="openComposerBtn" aria-expanded="false" aria-haspopup="true" data-toggle="dropdown" class="btn btn-default dropdown-toggle" type="button">
          <i class="fal fa-th-large"></i>
          <lift:locS>Composer</lift:locS>
        </button>
      </div>
      <div class="btn-group">
        <button aria-expanded="false" aria-haspopup="true" data-toggle="dropdown" class="btn btn-default dropdown-toggle" type="button">
          <i class="fal fa-mouse-pointer"></i>
          <lift:locS>Selection</lift:locS>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu selection-opts">
          <li><a data-select-event="select-all" href="javascript://"><lift:locS>Select All</lift:locS></a></li>
          <li><a data-select-event="select-none" href="javascript://"><lift:locS>Deselect All</lift:locS></a></li>
          <li><a data-select-event="select-inverse" href="javascript://"><lift:locS>Invert Selection</lift:locS></a></li>
          <li class="divider"></li>
          <li><a id="removeSelectedPagesBtn" href="javascript://"><lift:locS>Delete Selected</lift:locS></a></li>
        </ul>
      </div>
      <div class="btn-group">
        <button aria-expanded="false" aria-haspopup="true" data-toggle="dropdown" class="btn btn-default dropdown-toggle" type="button">
          <i class="fal fa-sort-alpha-down"></i>
          <lift:locS>Reorder</lift:locS>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu reorder-opts">
          <li><a data-reorder-mode="last-first" href="javascript://"><lift:locS>Reverse order</lift:locS> (<lift:locS>Last -> First</lift:locS>)</a></li>
        </ul>
      </div>
      <button id="addBlankPageBtn" class="btn btn-default add-blank-page-btn" type="button">
        <i class="fal fa-file"></i> <lift:locS>Add Blank Page</lift:locS>
      </button>
      <div class="btn-group">
        <button aria-expanded="false" aria-haspopup="true" data-toggle="dropdown" class="btn btn-default dropdown-toggle rounded-right" type="button">
          <i class="fal fa-trash"></i>
          <lift:locS>Delete</lift:locS>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu clear-opts">
          <li><a id="removeAllPagesBtn" href="javascript://"><lift:locS>Delete All</lift:locS></a></li>
          <li class="divider"></li>
        </ul>
      </div>
    </div>
    <div id="global-help-hint" style="display: none"></div>
  </div>

  <section id="file-page-selector-wrap" style="width: 0; display: none;">
    <div id="file-page-selector-header">
      <div class="btn-group" id="changeFileSelectorBtn">
        <button aria-expanded="false" aria-haspopup="true" data-toggle="dropdown" title="Change current file"
                class="btn btn-xs btn-link dropdown-toggle dropdown-toggle-on-hover" type="button">
          <span class="filename"></span>
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdown-xxs file-page-selector-opts"></ul>
      </div>
      <button class="close" type="button">Ã—</button>
    </div>
    <div class="divider-shadow" style="opacity: 0.1; padding-top: 15px;"></div>
    <div id="file-page-selector-opts">
      <a href="javascript://" id="file-page-selector-opts-select-all"><lift:locS>Select All</lift:locS></a>
      <a href="javascript://" id="file-page-selector-opts-select-none"><lift:locS>Deselect All</lift:locS></a>
    </div>
  </section>

  <ul id="emptyPlaceholder" style="display: none">
    <li class="empty" style="display: none">
      <img src="/images/pages/visually-combine-reorder/empty.svg">
      Compose your PDF document by adding/dragging pages here.<br/>
      No pages added yet.
    </li>
  </ul>
  <!-- moves at runtime under body -->
  <section class="adhoc-tools-menu">
    <ul id="addMarkDropdownMenu" class="dropdown-menu dropdown-xs add-mark-opts" style="display: none">
      <li class="add-files-menu-item dropdown-submenu"><a href="javascript://"><lift:locS>Add Files</lift:locS></a></li>
      <li class="add-pages-menu-item dropdown-submenu can-pick-pages"><a href="javascript://"><lift:locS>Add Pages</lift:locS></a></li>
    </ul>
  </section>
</section>

<%- include('partials/task-common-output-options', { onlyFile: true, outputFilenameAffix: 'merged' }); %>
<%- include('partials/task-screen-after'); %>

$(function(){function t(){var t=i.val();$(".bates-format-customize").hide();var e=$('.bates-format-customize[data-id="'+t+'"]'),n=e.attr("data-digits")||"6";a.find("[name=batesDigits]").val(n),e.fadeOut(100).fadeIn(50).trigger("preview")}function e(){function t(t,e,a,n){return t=t.replace(/\[BATES_NUMBER\]/g,a),t=t.replace(/\[FILE_NUMBER\]/g,e),t=t.replace(/\[PAGE_ARABIC\]/g,n),t.replace(/\[PAGE_OF_TOTAL\]/g,n+" of 123")}function e(t){for(var e=t,a=(t+"").length;a<i;a++)e="0"+e;return e}var n=a.find('[name="pattern"]').val(),i=parseInt(a.find("[name=batesDigits]").val()),r=parseInt($("input[name=batesStartFrom]").val()),o=parseInt($("input[name=fileCountStartFrom]").val()),u=["Preview:","File 1, Page 1: "+t(n,o,e(r),1),"File1, Page 2: "+t(n,o,e(r+1),2),"...","File 10, Page 1: "+t(n,o+9,e(r+122),2)].join("\n");$("#bates-preview").textBr(u).show().fadeOut(50).fadeIn(150)}var a=$(".task-form"),n=$(".bates-format-customize"),i=$("#batesStyle");i.on("change",function(){t()}),n.on("preview",function(){var t=[];$(this).closest(".bates-format-customize").find("input").each(function(e,a){t.push($(a).val())}),t=t.join(" "),a.find('[name="pattern"]').val(t),e()}),n.find('input[type="text"]').keyup(_.debounce(function(){$(this).parents(".bates-format-customize").trigger("preview")},500)),$("input[name=batesStartFrom],input[name=fileCountStartFrom]").keyup(_.debounce(function(){e()},500)),$('.bates-format-customize[data-id="bates-custom"]').find('input[type="text"]').mention({emptyQuery:!0,delimiter:"[",users:_.map(["BATES_NUMBER]","FILE_NUMBER]","PAGE_ARABIC]","PAGE_OF_TOTAL]"],function(t){return{username:t}})}),t(),$(".minicolors-input").minicolors({theme:"bootstrap"})});